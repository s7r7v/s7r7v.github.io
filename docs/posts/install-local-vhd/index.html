<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How To: Deploy local D365F&O environment from VHD | Basement 365</title><meta name=keywords content="howto,devops"><meta name=description content="Deploying a local development environment is kind of routine task for an F&O developer. Below are the steps I always follow to get my environment up and ready to work.
Download VHD. Usualy I download VHD files from LCS shared asset library - Shared asset library.
There is &ldquo;Downloadable VHD&rdquo; tab from where I can download VM image.
You can use your browser download manager or a third-party one.
I prefer to use PS script and azcopy."><meta name=author content="Me"><link rel=canonical href=https://s7r7v.github.io/posts/install-local-vhd/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://s7r7v.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://s7r7v.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://s7r7v.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://s7r7v.github.io/apple-touch-icon.png><link rel=mask-icon href=https://s7r7v.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="How To: Deploy local D365F&O environment from VHD"><meta property="og:description" content="Deploying a local development environment is kind of routine task for an F&O developer. Below are the steps I always follow to get my environment up and ready to work.
Download VHD. Usualy I download VHD files from LCS shared asset library - Shared asset library.
There is &ldquo;Downloadable VHD&rdquo; tab from where I can download VM image.
You can use your browser download manager or a third-party one.
I prefer to use PS script and azcopy."><meta property="og:type" content="article"><meta property="og:url" content="https://s7r7v.github.io/posts/install-local-vhd/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-31T11:30:03+00:00"><meta property="article:modified_time" content="2022-07-31T11:30:03+00:00"><meta property="og:site_name" content="Basement 365"><meta name=twitter:card content="summary"><meta name=twitter:title content="How To: Deploy local D365F&O environment from VHD"><meta name=twitter:description content="Deploying a local development environment is kind of routine task for an F&O developer. Below are the steps I always follow to get my environment up and ready to work.
Download VHD. Usualy I download VHD files from LCS shared asset library - Shared asset library.
There is &ldquo;Downloadable VHD&rdquo; tab from where I can download VM image.
You can use your browser download manager or a third-party one.
I prefer to use PS script and azcopy."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://s7r7v.github.io/posts/"},{"@type":"ListItem","position":2,"name":"How To: Deploy local D365F\u0026O environment from VHD","item":"https://s7r7v.github.io/posts/install-local-vhd/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How To: Deploy local D365F\u0026O environment from VHD","name":"How To: Deploy local D365F\u0026O environment from VHD","description":"Deploying a local development environment is kind of routine task for an F\u0026amp;O developer. Below are the steps I always follow to get my environment up and ready to work.\nDownload VHD. Usualy I download VHD files from LCS shared asset library - Shared asset library.\nThere is \u0026ldquo;Downloadable VHD\u0026rdquo; tab from where I can download VM image.\nYou can use your browser download manager or a third-party one.\nI prefer to use PS script and azcopy.","keywords":["howto","devops"],"articleBody":"Deploying a local development environment is kind of routine task for an F\u0026O developer. Below are the steps I always follow to get my environment up and ready to work.\nDownload VHD. Usualy I download VHD files from LCS shared asset library - Shared asset library.\nThere is “Downloadable VHD” tab from where I can download VM image.\nYou can use your browser download manager or a third-party one.\nI prefer to use PS script and azcopy.\nDocs -\u003e azcopy\nOriginal -\u003e How to: fast download of software deployable packages from LCS\nIn my case, the PS script looks like this:\n1 2 3 4 5 6 7 8 9 10 cd C:\\temp\\ .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part01.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part02.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part03.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part04.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part05.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part06.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part07.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part08.rar\" .\\azcopy\\azcopy.exe copy \"\" \"E:\\VIRTUAL MACHINES\\D365\\10.0.24\\FinandOps10.0.24.part09.rar\" Once download completed you may want to extract archive files into target folder. The target folder is the folder of your further VM.\nAs a result of this step we should have a single extracted VHD file.\nNote:\nIf you already have a VM with the same VHD disk you may want to change unique id of the image (it’s addressed to Oracle VirtualBox).\nBelow is the PS script:\n1 2 3 4 5 6 7 8 #### Sets execution policy to allow Windows 10 to execute the PS scripts. Run this command if neccecery #### set-executionpolicy remotesigned ########## VARIABLES ########## $VBoxManager = \"C:\\Program Files\\Oracle\\VirtualBox\\VBoxManage.exe\" $VirtualDiskAbsolutePath = \"D:\\SANDBOX\\FinandOps10.0.24_sandbox.vhd\" $VBArgs = @('internalcommands', 'sethduuid', $VirtualDiskAbsolutePath) #### COMMAND to change a disk's UUID #### \u0026 $VBoxManager $VBArgs Create VM with custom settings I usually use Oracle VirtualBox so the steps describe VM native settings for VirtualBox.\nOracle VirtualBox Create a new VM. Give it a desired name, pick the VHD up, and set up memory and OS type as shown in the picture. General settings. System settings. Storage settings. If you use SSD (I hope you do) the check-box is extremely important from a performance perspective.\nNetwork settings. Shared folder. Map desired shared folder to ensure file-moving between host and VM.\nInstall VirtualBox Guest Addition. Insert virtual CD image and follow steps below.\nRun Basic scripts for Windows 2016 Server. The script below helps to quickly make some OS settings and rename VM (required step if you are going to connect to Azure DevOps).\nAuthor -\u003e Valery Moskalenko\nNote: Computer name is set in line #43.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 # Resolve error in browser - ERR_HTTP2_INADEQUATE_TRANSPORT_SECURITY function MakeRegistryChanges { $registryPath = \"HKLM:\\SYSTEM\\CurrentControlSet\\Services\\HTTP\\Parameters\" $EnableHttp2TlsProp = \"EnableHttp2Tls\" $EnableHttp2CleartextProp = \"EnableHttp2Cleartext\" $PropValue = \"0\" if(!(Test-Path $registryPath)) { Write-Host \"Specified Registry path $registryPath does not exist. MakeRegistryChanges function did not resolve ERR_HTTP2_INADEQUATE_TRANSPORT_SECURITY error. Please check it in manual way.\" -ForegroundColor Red } else { New-ItemProperty -Path $registryPath -Name $EnableHttp2TlsProp -Value $PropValue -PropertyType DWORD -Force | Out-Null New-ItemProperty -Path $registryPath -Name $EnableHttp2CleartextProp -Value $PropValue -PropertyType DWORD -Force | Out-Null } } #Disable IE Enhanced Security Configuration function Disable-IEESC { $AdminKey = “HKLM:\\SOFTWARE\\Microsoft\\Active Setup\\Installed Components\\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}” $UserKey = “HKLM:\\SOFTWARE\\Microsoft\\Active Setup\\Installed Components\\{A509B1A8-37EF-4b3f-8CFC-4F3A74704073}” Set-ItemProperty -Path $AdminKey -Name “IsInstalled” -Value 0 Set-ItemProperty -Path $UserKey -Name “IsInstalled” -Value 0 Stop-Process -Name Explorer Write-Host “IE Enhanced Security Configuration (ESC) has been disabled.” -ForegroundColor Green } Disable-IEESC #Disable UAC Write-Verbose( \"Disable UAC\") -Verbose # More details here https://www.powershellgallery.com/packages/cEPRSDisableUAC \u0026 \"$env:SystemRoot\\System32\\reg.exe\" ADD \"HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\" /v ConsentPromptBehaviorAdmin /t REG_DWORD /d 4 /f \u0026 \"$env:SystemRoot\\System32\\reg.exe\" ADD \"HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\" /v EnableInstallerDetection /t REG_DWORD /d 1 /f \u0026 \"$env:SystemRoot\\System32\\reg.exe\" ADD \"HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\" /v EnableLUA /t REG_DWORD /d 0 /f gpupdate #password age pop up net accounts /maxpwage:unlimited # update regitry keys Write-Verbose( \"Update Registry keys\") -Verbose MakeRegistryChanges #Rename and restart $NewComputerName = 'SRV-SBX' $NewComputerNamelength = $NewComputerName.Length if($NewComputerNamelength -ge 15) { Write-Host \"Computer name should be less than 15 symbols. Current length is $NewComputerNamelength symbols. Please update computer name. And repeat last step\" -ForegroundColor Red } else { Rename-Computer -NewName $NewComputerName Restart-Computer } VM should go to reboot.\nUpdate SSRS to use local server name. Starting recent updates the VHD images are delivered with the correct SSRS configuration which does not need to be updated.\nYou can check the configuration here.\nConnect to localhost instance.\nSQL Server name should be ’localhost'.\nIf the server name is different then most likely it has original VM’s name (as you remember we have changed VM’s name).\nSo I would recommend taking the steps below to align SSRS configuration.\nReport portal deployment is an optional step.\nThat is it for SSRS configuration in our local environment.\nSet up links (optional). For better experience I prefer to pin the most used apps to taskbar.\nDo not forget the applications which are used for development must run as Administrator.\nRun the following SQL script (optional). With the script below we can do fine-tunning SQL server performance.\nUsing MS SQL Server Management Studio, run the script.\n1 2 3 4 5 6 7 8 9 10 11 /* Performance options */ EXEC sys.sp_configure N'show advanced options', N'1' RECONFIGURE WITH OVERRIDE EXEC sys.sp_configure N'min server memory (MB)', N'2048' EXEC sys.sp_configure N'max server memory (MB)', N'8192' EXEC sys.sp_configure N'backup compression default', N'1' EXEC sys.sp_configure N'cost threshold for parallelism', N'50' EXEC sys.sp_configure N'max degree of parallelism', N'1' RECONFIGURE WITH OVERRIDE GO EXEC sys.sp_configure N'show advanced options', N'0' RECONFIGURE WITH OVERRIDE GO Create AxDB backup (with demo data). Make a backup of original AxDB database (just in case).\nUsing MS SQL Server Management Studio, run the script.\n1 2 3 4 BACKUP DATABASE [AxDB] TO DISK = N'C:\\EmptyDataset\\AxDB_Std.bak' WITH COPY_ONLY, NOFORMAT, INIT, NAME = N'AxDB-Full Database Backup', SKIP, NOREWIND, NOUNLOAD, COMPRESSION, STATS = 5 GO This step will give us ability to restore original database quickly (in case of any unexpected troubles).\nConnect to TFS and configure local workspace. Obviously, we deploy local environment either for personal needs or for a specific project.\nIn the second case we need to connect to a team project.\nBelow you can find the sep to configure local TFS workspace (I have not used Git yet).\nUsing Team Explorer we connect to a specific project in Azure DevOps.\nIn Team Explorer window click ‘connect’ icon.\nOn Connect page, under Manage connection drop-down, hit “Connect to a Project” option.\nEnter your credentials and select desired project to connect.\nGo back to Team Explorer window and set workspace up (sometimes Visual Studio needs to be re-started after connecting to a project).\nSelect a workspace and hit “Edit” button.\nMap server folder to local paths (usually a DevOps guy shares the details with you).\nNow we can go ahead and refresh our local worspace codebase from server.\nOpen Source control explorer page and get the latest code.\nNow we should have everything in place.\nRefresh and build required models. Last actions to take - 1) refresh models. 2) Build/Sync operations.\nNote: if Build operation is finished with errors then Sync operation will not make any sense. You should first do a successful build.\nInstall additional software (optional) As of now I often use the following applications which need to be installed.\nMicrosoft Edge as a primary browser.\nVisual Studio Code.\nPostman (optional).\nStorage account explorer (optional).\nGit Windows desktop client (optional).\nAdministrating provision. Now we would want to get into the local D365 application.\nWe have to set up our account as an administrator.\nNote: Sometimes, we use client’s database, in that case your account may have been already added and you can skip this step.\nRun the tool as an Administrator account, give there your account.\nThe tool can be found either on Desktop or by the following path - {Your drive}:\\AOSService\\PackagesLocalDirectory\\Bin\\\n(One time, I remember, there was no the tool in my VM, at all, nowhere, I had to copy-paste the app from another VM)\nUPD: Since 10.0.24 VHD, we have to take some extra steps.\nSee this blog post - Admin Provisioning Tool Error: The value’s length for key ‘password’ exceeds its limit of ‘128’\nPersonalize application. Usually I change color schema and scale of user interface.\nIn this way I can differentiate D365 instances.\nFor example:\nOrange - My dev environment.\nGreen - UAT environment.\nBlue - Production.\nBrown - Performance test\nThat’s it. Happy codding! :)\n","wordCount":"1425","inLanguage":"en","datePublished":"2022-07-31T11:30:03Z","dateModified":"2022-07-31T11:30:03Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://s7r7v.github.io/posts/install-local-vhd/"},"publisher":{"@type":"Organization","name":"Basement 365","logo":{"@type":"ImageObject","url":"https://s7r7v.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://s7r7v.github.io/ accesskey=h title="Basement 365 (Alt + H)">Basement 365</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://s7r7v.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://s7r7v.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://s7r7v.github.io/posts/>Posts</a></div><h1 class=post-title>How To: Deploy local D365F&O environment from VHD</h1><div class=post-meta><span title='2022-07-31 11:30:03 +0000 +0000'>July 31, 2022</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/s7r7v/s7r7v.github.io/content/posts/install-local-vhd/index.md rel="noopener noreferrer" target=_blank>Noticed a mistake? Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#download-vhd aria-label="Download VHD.">Download VHD.</a></li><li><a href=#create-vm-with-custom-settings aria-label="Create VM with custom settings">Create VM with custom settings</a><ul><li><a href=#oracle-virtualbox aria-label="Oracle VirtualBox">Oracle VirtualBox</a></li></ul></li><li><a href=#install-virtualbox-guest-addition aria-label="Install VirtualBox Guest Addition.">Install VirtualBox Guest Addition.</a></li><li><a href=#run-basic-scripts-for-windows-2016-server aria-label="Run Basic scripts for Windows 2016 Server.">Run Basic scripts for Windows 2016 Server.</a></li><li><a href=#update-ssrs-to-use-local-server-name aria-label="Update SSRS to use local server name.">Update SSRS to use local server name.</a></li><li><a href=#set-up-links-optional aria-label="Set up links (optional).">Set up links (optional).</a></li><li><a href=#run-the-following-sql-script-optional aria-label="Run the following SQL script (optional).">Run the following SQL script (optional).</a></li><li><a href=#create-axdb-backup-with-demo-data aria-label="Create AxDB backup (with demo data).">Create AxDB backup (with demo data).</a></li><li><a href=#connect-to-tfs-and-configure-local-workspace aria-label="Connect to TFS and configure local workspace.">Connect to TFS and configure local workspace.</a></li><li><a href=#refresh-and-build-required-models aria-label="Refresh and build required models.">Refresh and build required models.</a></li><li><a href=#install-additional-software-optional aria-label="Install additional software (optional)">Install additional software (optional)</a></li><li><a href=#administrating-provision aria-label="Administrating provision.">Administrating provision.</a></li><li><a href=#personalize-application aria-label="Personalize application.">Personalize application.</a></li></ul></div></details></div><div class=post-content><p>Deploying a local development environment is kind of routine task for an F&O developer.
Below are the steps I always follow to get my environment up and ready to work.</p><h2 id=download-vhd>Download VHD.<a hidden class=anchor aria-hidden=true href=#download-vhd>#</a></h2><p>Usualy I download VHD files from LCS shared asset library - <a href=https://lcs.dynamics.com/V2/SharedAssetLibrary>Shared asset library</a>.</p><p>There is &ldquo;Downloadable VHD&rdquo; tab from where I can download VM image.</p><p><img loading=lazy src=img/LCS-Shared-Asset-Lib.jpg alt="LCS Asset library"></p><p>You can use your browser download manager or a third-party one.</p><p>I prefer to use PS script and <code>azcopy</code>.</p><p>Docs -> <a href=https://docs.microsoft.com/en-us/azure/storage/common/storage-ref-azcopy>azcopy</a></p><p>Original -> <a href=https://sites.google.com/site/dynamicsaxblog/how-to-devops-all-the-posts-at-once/howtofastdownloadofsoftwaredeployablepackagesfromlcs>How to: fast download of software deployable packages from LCS</a></p><p>In my case, the PS script looks like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nb>cd </span><span class=n>C:</span><span class=p>\</span><span class=n>temp</span><span class=p>\</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part01.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part02.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part03.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part04.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part05.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part06.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part07.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part08.rar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>.\</span><span class=n>azcopy</span><span class=p>\</span><span class=n>azcopy</span><span class=p>.</span><span class=n>exe</span> <span class=nb>copy </span><span class=s2>&#34;&lt;SAS URL&gt;&#34;</span> <span class=s2>&#34;E:\VIRTUAL MACHINES\D365\10.0.24\FinandOps10.0.24.part09.rar&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>Once download completed you may want to extract archive files into target folder. The target folder is the folder of your further VM.</p><p>As a result of this step we should have a single extracted VHD file.</p><blockquote><p>Note:</p><p>If you already have a VM with the same VHD disk you may want to change unique id of the image (it&rsquo;s addressed to Oracle VirtualBox).</p><p>Below is the PS script:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=c>#### Sets execution policy to allow Windows 10 to execute the PS scripts. Run this command if neccecery</span>
</span></span><span class=line><span class=cl><span class=c>#### set-executionpolicy remotesigned</span>
</span></span><span class=line><span class=cl><span class=c>########## VARIABLES ##########</span>
</span></span><span class=line><span class=cl><span class=nv>$VBoxManager</span> <span class=p>=</span> <span class=s2>&#34;C:\Program Files\Oracle\VirtualBox\VBoxManage.exe&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$VirtualDiskAbsolutePath</span> <span class=p>=</span> <span class=s2>&#34;D:\SANDBOX\FinandOps10.0.24_sandbox.vhd&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$VBArgs</span> <span class=p>=</span> <span class=p>@(</span><span class=s1>&#39;internalcommands&#39;</span><span class=p>,</span> <span class=s1>&#39;sethduuid&#39;</span><span class=p>,</span> <span class=nv>$VirtualDiskAbsolutePath</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c>#### COMMAND to change a disk&#39;s UUID ####</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> <span class=nv>$VBoxManager</span> <span class=nv>$VBArgs</span>
</span></span></code></pre></td></tr></table></div></div></blockquote><h2 id=create-vm-with-custom-settings>Create VM with custom settings<a hidden class=anchor aria-hidden=true href=#create-vm-with-custom-settings>#</a></h2><p>I usually use Oracle VirtualBox so the steps describe VM native settings for VirtualBox.</p><h3 id=oracle-virtualbox>Oracle VirtualBox<a hidden class=anchor aria-hidden=true href=#oracle-virtualbox>#</a></h3><ol><li>Create a new VM.</li></ol><p><img loading=lazy src=img/img-1.jpg alt="New VM"></p><ol start=2><li>Give it a desired name, pick the VHD up, and set up memory and OS type as shown in the picture.</li></ol><p><img loading=lazy src=img/img-2.jpg alt=Settings></p><ol start=3><li>General settings.</li></ol><p><img loading=lazy src=img/img-3.jpg alt="General Basic"></p><p><img loading=lazy src=img/img-4.jpg alt="General Advanced"></p><ol start=4><li>System settings.</li></ol><p><img loading=lazy src=img/img-5.jpg alt="System Processor"></p><p><img loading=lazy src=img/img-6.jpg alt="System Acceleration"></p><ol start=5><li>Storage settings.</li></ol><p>If you use SSD (I hope you do) the check-box is extremely important from a performance perspective.</p><p><img loading=lazy src=img/img-7.jpg alt="Storage SSD"></p><ol start=6><li>Network settings.</li></ol><p><img loading=lazy src=img/img-8.jpg alt="Network settings"></p><ol start=7><li>Shared folder.</li></ol><p>Map desired shared folder to ensure file-moving between host and VM.</p><p><img loading=lazy src=img/img-9.jpg alt="Shared folders"></p><h2 id=install-virtualbox-guest-addition>Install VirtualBox Guest Addition.<a hidden class=anchor aria-hidden=true href=#install-virtualbox-guest-addition>#</a></h2><p>Insert virtual CD image and follow steps below.</p><p><img loading=lazy src=img/guest-1.jpg alt="CD image"></p><p><img loading=lazy src=img/guest-2.jpg alt="Run installation"></p><p><img loading=lazy src=img/guest-3.jpg alt="Welcome page"></p><p><img loading=lazy src=img/guest-4.jpg alt="Pick location"></p><p><img loading=lazy src=img/guest-5.jpg alt="Choose components"></p><p><img loading=lazy src=img/guest-6.jpg alt="Installing progress"></p><p><img loading=lazy src=img/guest-7.jpg alt="Complete step"></p><h2 id=run-basic-scripts-for-windows-2016-server>Run Basic scripts for Windows 2016 Server.<a hidden class=anchor aria-hidden=true href=#run-basic-scripts-for-windows-2016-server>#</a></h2><p>The script below helps to quickly make some OS settings and rename VM (required step if you are going to connect to Azure DevOps).</p><p>Author -> <a href=https://vmoskalenkoblog.wordpress.com/>Valery Moskalenko</a></p><blockquote><p>Note: Computer name is set in line #43.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=c># Resolve error in browser - ERR_HTTP2_INADEQUATE_TRANSPORT_SECURITY</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=n>MakeRegistryChanges</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$registryPath</span> <span class=p>=</span> <span class=s2>&#34;HKLM:\SYSTEM\CurrentControlSet\Services\HTTP\Parameters&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$EnableHttp2TlsProp</span> <span class=p>=</span> <span class=s2>&#34;EnableHttp2Tls&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$EnableHttp2CleartextProp</span> <span class=p>=</span> <span class=s2>&#34;EnableHttp2Cleartext&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$PropValue</span> <span class=p>=</span> <span class=s2>&#34;0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(!(</span><span class=nb>Test-Path</span> <span class=nv>$registryPath</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>Write-Host</span> <span class=s2>&#34;Specified Registry path $registryPath does not exist. MakeRegistryChanges function did not resolve ERR_HTTP2_INADEQUATE_TRANSPORT_SECURITY error. Please check it in manual way.&#34;</span> <span class=n>-ForegroundColor</span> <span class=n>Red</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>New-ItemProperty</span> <span class=n>-Path</span> <span class=nv>$registryPath</span> <span class=n>-Name</span> <span class=nv>$EnableHttp2TlsProp</span> <span class=n>-Value</span> <span class=nv>$PropValue</span> <span class=n>-PropertyType</span> <span class=n>DWORD</span> <span class=n>-Force</span> <span class=p>|</span> <span class=nb>Out-Null</span>
</span></span><span class=line><span class=cl>        <span class=nb>New-ItemProperty</span> <span class=n>-Path</span> <span class=nv>$registryPath</span> <span class=n>-Name</span> <span class=nv>$EnableHttp2CleartextProp</span> <span class=n>-Value</span> <span class=nv>$PropValue</span> <span class=n>-PropertyType</span> <span class=n>DWORD</span> <span class=n>-Force</span> <span class=p>|</span> <span class=nb>Out-Null</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>#Disable IE Enhanced Security Configuration</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nb>Disable-IEESC</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nv>$AdminKey</span> <span class=p>=</span> <span class=err>“</span><span class=n>HKLM</span><span class=err>:</span><span class=p>\</span><span class=n>SOFTWARE</span><span class=p>\</span><span class=n>Microsoft</span><span class=p>\</span><span class=n>Active</span> <span class=n>Setup</span><span class=p>\</span><span class=n>Installed</span> <span class=n>Components</span><span class=p>\{</span><span class=n>A509B1A7</span><span class=p>-</span><span class=n>37EF</span><span class=p>-</span><span class=n>4b3f</span><span class=p>-</span><span class=n>8CFC</span><span class=p>-</span><span class=n>4F3A74704073</span><span class=p>}</span><span class=err>”</span>
</span></span><span class=line><span class=cl><span class=nv>$UserKey</span> <span class=p>=</span> <span class=err>“</span><span class=n>HKLM</span><span class=err>:</span><span class=p>\</span><span class=n>SOFTWARE</span><span class=p>\</span><span class=n>Microsoft</span><span class=p>\</span><span class=n>Active</span> <span class=n>Setup</span><span class=p>\</span><span class=n>Installed</span> <span class=n>Components</span><span class=p>\{</span><span class=n>A509B1A8</span><span class=p>-</span><span class=n>37EF</span><span class=p>-</span><span class=n>4b3f</span><span class=p>-</span><span class=n>8CFC</span><span class=p>-</span><span class=n>4F3A74704073</span><span class=p>}</span><span class=err>”</span>
</span></span><span class=line><span class=cl><span class=nb>Set-ItemProperty</span> <span class=n>-Path</span> <span class=nv>$AdminKey</span> <span class=n>-Name</span> <span class=err>“</span><span class=n>IsInstalled</span><span class=err>”</span> <span class=n>-Value</span> <span class=n>0</span>
</span></span><span class=line><span class=cl><span class=nb>Set-ItemProperty</span> <span class=n>-Path</span> <span class=nv>$UserKey</span> <span class=n>-Name</span> <span class=err>“</span><span class=n>IsInstalled</span><span class=err>”</span> <span class=n>-Value</span> <span class=n>0</span>
</span></span><span class=line><span class=cl><span class=nb>Stop-Process</span> <span class=n>-Name</span> <span class=n>Explorer</span>
</span></span><span class=line><span class=cl><span class=nb>Write-Host</span> <span class=err>“</span><span class=n>IE</span> <span class=n>Enhanced</span> <span class=n>Security</span> <span class=n>Configuration</span> <span class=p>(</span><span class=n>ESC</span><span class=p>)</span> <span class=n>has</span> <span class=n>been</span> <span class=n>disabled</span><span class=p>.</span><span class=err>”</span> <span class=n>-ForegroundColor</span> <span class=n>Green</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nb>Disable-IEESC</span>
</span></span><span class=line><span class=cl><span class=c>#Disable UAC</span>
</span></span><span class=line><span class=cl><span class=nb>Write-Verbose</span><span class=p>(</span> <span class=s2>&#34;Disable UAC&#34;</span><span class=p>)</span> <span class=n>-Verbose</span> 
</span></span><span class=line><span class=cl><span class=c># More details here https://www.powershellgallery.com/packages/cEPRSDisableUAC</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> <span class=s2>&#34;$env:SystemRoot\System32\reg.exe&#34;</span> <span class=n>ADD</span> <span class=s2>&#34;HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&#34;</span> <span class=p>/</span><span class=n>v</span> <span class=n>ConsentPromptBehaviorAdmin</span> <span class=p>/</span><span class=n>t</span> <span class=n>REG_DWORD</span> <span class=p>/</span><span class=n>d</span> <span class=n>4</span> <span class=p>/</span><span class=n>f</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> <span class=s2>&#34;$env:SystemRoot\System32\reg.exe&#34;</span> <span class=n>ADD</span> <span class=s2>&#34;HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&#34;</span> <span class=p>/</span><span class=n>v</span> <span class=n>EnableInstallerDetection</span> <span class=p>/</span><span class=n>t</span> <span class=n>REG_DWORD</span> <span class=p>/</span><span class=n>d</span> <span class=n>1</span> <span class=p>/</span><span class=n>f</span>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> <span class=s2>&#34;$env:SystemRoot\System32\reg.exe&#34;</span> <span class=n>ADD</span> <span class=s2>&#34;HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System&#34;</span> <span class=p>/</span><span class=n>v</span> <span class=n>EnableLUA</span> <span class=p>/</span><span class=n>t</span> <span class=n>REG_DWORD</span> <span class=p>/</span><span class=n>d</span> <span class=n>0</span> <span class=p>/</span><span class=n>f</span> 
</span></span><span class=line><span class=cl><span class=n>gpupdate</span>
</span></span><span class=line><span class=cl><span class=c>#password age pop up</span>
</span></span><span class=line><span class=cl><span class=n>net</span> <span class=n>accounts</span> <span class=p>/</span><span class=n>maxpwage</span><span class=err>:</span><span class=n>unlimited</span>
</span></span><span class=line><span class=cl><span class=c># update regitry keys</span>
</span></span><span class=line><span class=cl><span class=nb>Write-Verbose</span><span class=p>(</span> <span class=s2>&#34;Update Registry keys&#34;</span><span class=p>)</span> <span class=n>-Verbose</span> 
</span></span><span class=line><span class=cl><span class=n>MakeRegistryChanges</span>
</span></span><span class=line><span class=cl><span class=c>#Rename and restart</span>
</span></span><span class=line><span class=cl><span class=nv>$NewComputerName</span> <span class=p>=</span> <span class=s1>&#39;SRV-SBX&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>$NewComputerNamelength</span> <span class=p>=</span> <span class=nv>$NewComputerName</span><span class=p>.</span><span class=n>Length</span>
</span></span><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nv>$NewComputerNamelength</span> <span class=o>-ge</span> <span class=n>15</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nb>Write-Host</span> <span class=s2>&#34;Computer name should be less than 15 symbols. Current length is $NewComputerNamelength symbols. Please update computer name. And repeat last step&#34;</span> <span class=n>-ForegroundColor</span> <span class=n>Red</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nb>Rename-Computer</span> <span class=n>-NewName</span> <span class=nv>$NewComputerName</span>
</span></span><span class=line><span class=cl><span class=nb>Restart-Computer</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>VM should go to reboot.</p><h2 id=update-ssrs-to-use-local-server-name>Update SSRS to use local server name.<a hidden class=anchor aria-hidden=true href=#update-ssrs-to-use-local-server-name>#</a></h2><p>Starting recent updates the VHD images are delivered with the correct SSRS configuration which does not need to be updated.</p><p>You can check the configuration here.</p><p><img loading=lazy src=img/ssrs-1.jpg alt="SSRS config menu"></p><p>Connect to localhost instance.</p><p><img loading=lazy src=img/ssrs-2.jpg alt="SSRS report database connect"></p><p>SQL Server name should be &rsquo;localhost'.</p><p><img loading=lazy src=img/ssrs-3.jpg alt="SSRS report database check"></p><p>If the server name is different then most likely it has original VM&rsquo;s name (as you remember we have changed VM&rsquo;s name).</p><p>So I would recommend taking the steps below to align SSRS configuration.</p><p><img loading=lazy src=img/ssrs-4.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-5.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-6.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-7.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-8.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-9.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-10.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-11.jpg alt="SSRS configuration"></p><p><img loading=lazy src=img/ssrs-12.jpg alt="SSRS configuration"></p><p>Report portal deployment is an optional step.</p><p><img loading=lazy src=img/ssrs-13.jpg alt="SSRS configuration"></p><p>That is it for SSRS configuration in our local environment.</p><h2 id=set-up-links-optional>Set up links (optional).<a hidden class=anchor aria-hidden=true href=#set-up-links-optional>#</a></h2><p>For better experience I prefer to pin the most used apps to taskbar.</p><p><img loading=lazy src=img/apps-1.jpg alt="Applications on taskbar"></p><p>Do not forget the applications which are used for development must run as Administrator.</p><p><img loading=lazy src=img/apps-2.jpg alt="Run as Administrator"></p><h2 id=run-the-following-sql-script-optional>Run the following SQL script (optional).<a hidden class=anchor aria-hidden=true href=#run-the-following-sql-script-optional>#</a></h2><p>With the script below we can do fine-tunning SQL server performance.</p><p>Using MS SQL Server Management Studio, run the script.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsql data-lang=tsql><span class=line><span class=cl><span class=cm>/* Performance options */</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;show advanced options&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;1&#39;</span><span class=w> </span><span class=k>RECONFIGURE</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;min server memory (MB)&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;2048&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;max server memory (MB)&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;8192&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;backup compression default&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;cost threshold for parallelism&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;50&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;max degree of parallelism&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RECONFIGURE</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>EXEC</span><span class=w> </span><span class=n>sys</span><span class=p>.</span><span class=n>sp_configure</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;show advanced options&#39;</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;0&#39;</span><span class=w> </span><span class=k>RECONFIGURE</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>OVERRIDE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GO</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=create-axdb-backup-with-demo-data>Create AxDB backup (with demo data).<a hidden class=anchor aria-hidden=true href=#create-axdb-backup-with-demo-data>#</a></h2><p>Make a backup of original AxDB database (just in case).</p><p>Using MS SQL Server Management Studio, run the script.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsql data-lang=tsql><span class=line><span class=cl><span class=k>BACKUP</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=o>[</span><span class=n>AxDB</span><span class=o>]</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=k>DISK</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;C:\EmptyDataset\AxDB_Std.bak&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WITH</span><span class=w> </span><span class=n>COPY_ONLY</span><span class=p>,</span><span class=w> </span><span class=n>NOFORMAT</span><span class=p>,</span><span class=w> </span><span class=n>INIT</span><span class=p>,</span><span class=w> </span><span class=n>NAME</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;AxDB-Full Database Backup&#39;</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>SKIP</span><span class=p>,</span><span class=w> </span><span class=n>NOREWIND</span><span class=p>,</span><span class=w> </span><span class=n>NOUNLOAD</span><span class=p>,</span><span class=w> </span><span class=n>COMPRESSION</span><span class=p>,</span><span class=w> </span><span class=n>STATS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GO</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>This step will give us ability to restore original database quickly (in case of any unexpected troubles).</p><h2 id=connect-to-tfs-and-configure-local-workspace>Connect to TFS and configure local workspace.<a hidden class=anchor aria-hidden=true href=#connect-to-tfs-and-configure-local-workspace>#</a></h2><p>Obviously, we deploy local environment either for personal needs or for a specific project.</p><p>In the second case we need to connect to a team project.</p><p>Below you can find the sep to configure local TFS workspace (I have not used Git yet).</p><p>Using Team Explorer we connect to a specific project in Azure DevOps.</p><p><img loading=lazy src=img/team-1.jpg alt="Open Team Explorer window"></p><p>In Team Explorer window click &lsquo;connect&rsquo; icon.</p><p><img loading=lazy src=img/team-2.jpg alt="Connect icon"></p><p>On Connect page, under Manage connection drop-down, hit &ldquo;Connect to a Project&rdquo; option.</p><p><img loading=lazy src=img/team-3.jpg alt="Connect to a Project"></p><p>Enter your credentials and select desired project to connect.</p><p><img loading=lazy src=img/team-4.jpg alt="Select a Project"></p><p>Go back to Team Explorer window and set workspace up (sometimes Visual Studio needs to be re-started after connecting to a project).</p><p><img loading=lazy src=img/team-5.jpg alt="Workspace management"></p><p>Select a workspace and hit &ldquo;Edit&rdquo; button.</p><p><img loading=lazy src=img/team-6.jpg alt="Edit workspace"></p><p>Map server folder to local paths (usually a DevOps guy shares the details with you).</p><p><img loading=lazy src=img/team-7.jpg alt="Workspace mapping"></p><p>Now we can go ahead and refresh our local worspace codebase from server.</p><p>Open Source control explorer page and get the latest code.</p><p><img loading=lazy src=img/team-9.jpg alt="Source control explorer menu"></p><p><img loading=lazy src=img/team-10.jpg alt="Advanced get latest"></p><p>Now we should have everything in place.</p><h2 id=refresh-and-build-required-models>Refresh and build required models.<a hidden class=anchor aria-hidden=true href=#refresh-and-build-required-models>#</a></h2><p>Last actions to take - 1) refresh models. 2) Build/Sync operations.</p><p><img loading=lazy src=img/team-8.jpg alt="Build and sync"></p><p>Note: if Build operation is finished with errors then Sync operation will not make any sense. You should first do a successful build.</p><h2 id=install-additional-software-optional>Install additional software (optional)<a hidden class=anchor aria-hidden=true href=#install-additional-software-optional>#</a></h2><p>As of now I often use the following applications which need to be installed.</p><ul><li><p>Microsoft Edge as a primary browser.</p></li><li><p>Visual Studio Code.</p></li><li><p>Postman (optional).</p></li><li><p>Storage account explorer (optional).</p></li><li><p>Git Windows desktop client (optional).</p></li></ul><h2 id=administrating-provision>Administrating provision.<a hidden class=anchor aria-hidden=true href=#administrating-provision>#</a></h2><p>Now we would want to get into the local D365 application.</p><p>We have to set up our account as an administrator.</p><p>Note: Sometimes, we use client&rsquo;s database, in that case your account may have been already added and you can skip this step.</p><p>Run the tool as an Administrator account, give there your account.</p><p>The tool can be found either on Desktop or by the following path - {Your drive}:\AOSService\PackagesLocalDirectory\Bin\</p><p>(One time, I remember, there was no the tool in my VM, at all, nowhere, I had to copy-paste the app from another VM)</p><p><img loading=lazy src=img/admin-provision.jpg alt="Admin provision"></p><blockquote><p>UPD: Since 10.0.24 VHD, we have to take some extra steps.</p><p>See this blog post - <a href=https://erpcoder.blog/2022/04/12/admin-provisioning-tool-error-the-values-length-for-key-password-exceeds-its-limit-of-128/>Admin Provisioning Tool Error: The value’s length for key ‘password’ exceeds its limit of ‘128’</a></p></blockquote><h2 id=personalize-application>Personalize application.<a hidden class=anchor aria-hidden=true href=#personalize-application>#</a></h2><p>Usually I change color schema and scale of user interface.</p><p>In this way I can differentiate D365 instances.</p><p>For example:</p><ol><li><p>Orange - My dev environment.</p></li><li><p>Green - UAT environment.</p></li><li><p>Blue - Production.</p></li><li><p>Brown - Performance test</p></li></ol><hr><p>That&rsquo;s it. Happy codding! :)</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://s7r7v.github.io/tags/howto/>howto</a></li><li><a href=https://s7r7v.github.io/tags/devops/>devops</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share How To: Deploy local D365F&O environment from VHD on twitter" href="https://twitter.com/intent/tweet/?text=How%20To%3a%20Deploy%20local%20D365F%26O%20environment%20from%20VHD&url=https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f&hashtags=howto%2cdevops"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How To: Deploy local D365F&O environment from VHD on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f&title=How%20To%3a%20Deploy%20local%20D365F%26O%20environment%20from%20VHD&summary=How%20To%3a%20Deploy%20local%20D365F%26O%20environment%20from%20VHD&source=https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How To: Deploy local D365F&O environment from VHD on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f&title=How%20To%3a%20Deploy%20local%20D365F%26O%20environment%20from%20VHD"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How To: Deploy local D365F&O environment from VHD on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How To: Deploy local D365F&O environment from VHD on whatsapp" href="https://api.whatsapp.com/send?text=How%20To%3a%20Deploy%20local%20D365F%26O%20environment%20from%20VHD%20-%20https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How To: Deploy local D365F&O environment from VHD on telegram" href="https://telegram.me/share/url?text=How%20To%3a%20Deploy%20local%20D365F%26O%20environment%20from%20VHD&url=https%3a%2f%2fs7r7v.github.io%2fposts%2finstall-local-vhd%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://s7r7v.github.io/>Basement 365</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>